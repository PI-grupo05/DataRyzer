<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="./css/historico.css" />
		<title>Gerentes - Dataryzers</title>
	</head>
	<body>

		<div id="menuLateral">
			<img id="logo" src="./assets/imgs/logoData-White.png" alt="">
			<div id="menuLateralSecoes">
				<a href="./dashGeral.html">
					<img src="./assets/imgs/iconeDash.png" alt="">
					<span>Dashboard</span>
				</a>
				<a href="">
					<img src="./assets/imgs/iconePerfil.png" alt="">
					<span>Perfil</span>
				</a>
				<a href="">
					<img src="./assets/imgs/iconeNotificacao.png" alt="">
					<span>Notificações</span>                
				</a>
				<a href="./unidadeConsumidora.html">
					<img src="./assets/imgs/iconeEmpresas.png" alt="">
					<span>Unidades Consumidoras</span>
				</a>
				<a href="./historico_interrupcao.html">
					<img src="./assets/imgs/historico_icon.png" alt="">
					<span>historico de interrupções</span>
				</a>
			</div>
			<a id="botaoSair" onclick="sair()">
				<img src="./assets/imgs/iconeSair.png" alt="">
				Sair
			</a>
		</div>

		<main class="main">
			<section class="header" role="banner">
				<img id="botaoMenu" onclick="abrirMenu()" src="./assets/imgs/iconeSeta.png" alt="">
            	<div id="secaoUsuario">
                	<img src="./assets/imgs/iconeUsuario.png" alt="">
                	<div id="dadosUsuario">
                    	<span>Usuario</span>
                    	<span>Cargo</span>
                </div>
			</section>

			<h1>Interrupções</h1>

			<form class="filter" role="search" onsubmit="return false;">
				<select aria-label="Campo de filtro">
					<option>Id Distribuidora</option>
					<option>Distribuidora</option>
					<option>Unidade Consumidora</option>
				</select>
				<input
					type="text"
					placeholder="Buscar..."
					aria-label="Buscar por campo selecionado"
				/>
				<button type="submit" aria-label="Pesquisar"><img class="lupinha" url="./assets/imgs/lupa.png" alt=""></button>
			</form>

			<table>
				<thead>
					<tr>
						<th>Id Distribuidora</th>
						<th>Distribuidora</th>
						<th>Unidade Consumidora</th>
						<th>Data Início</th>
						<th>Data Fim</th>
						<th>Duração</th>
						<th>Motivo</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>001</td>
						<td>XPTO</td>
						<td>123456</td>
						<td>01/01/2025</td>
						<td>02/01/2025</td>
						<td>24h</td>
						<td>Manutenção</td>
					</tr>
					<tr>
						<td>002</td>
						<td>XPTO</td>
						<td>654321</td>
						<td>05/01/2025</td>
						<td>06/01/2025</td>
						<td>12h</td>
						<td>Obra</td>
					</tr>
				</tbody>
			</table>
		</main>
	</body>
</html>
<script src="/env.js"></script>
<script src="./js/dashEspecifica.js"></script>
<script>
	function sair() {
		sessionStorage.clear(); // Limpa toda a sessão do usuário
		window.location.href = `http://${window.APP_HOST}:8080/login.html`;; // Redireciona para a tela de login
	}



  	fetch(`/historico/buscarHistorico/${sessionStorage.FK_DISTRIBUIDORA}`, { 
		method: 'GET',
		cache: 'no-store'
	})
	.then(function (response) {
		if (response.ok) {
			response.json().then(function (resposta) {
				console.log(`Dados recebidos de historico no front: ${JSON.stringify(resposta)}`);
			});
		} else {
			console.error('Nenhum dado encontrado ou erro na API');
		}
    })
	.catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ historico: ${error.message}`);
    });

</script>


